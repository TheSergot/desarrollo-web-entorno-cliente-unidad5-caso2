!function(e){"use strict";function t(){function n(e){return document.getElementById(o.genericData.id+e)}emic.top.ui.UISkinBase.call(this);function i(e){}function s(e){var t;0==e.result.parserResult.code?(t=e.result.parserResult.result.replace(/{<-%ID%->}/g,o.genericData.id),a.innerHTML=t,E.apply(this),this.notifyInitComplete()):e.result.parserResult.code}var a,o,r,l,c,m,u,d,p,f,h=this,_="/psdmedia/media/top/skins/EPaudioPortada/assets/",y="/psdmedia/media/top/skins/EPaudioPortada/assets/",P=!1,T=!1,e="mm_AudioPlayer_pequeno",A=0,g="template.html",S="estilos.css",E=function(){var e,a,t;if(r=n("_player"),l=n("_btn_play"),c=n("_barra_azul"),m=n("_manejador"),u=n("_progress"),d=n("_current_time"),p=n("_total_time"),f=n("_titulo"),getDevice().mobile||(r.className=r.className.replace("xxx","xxx mm_AudioPlayer--escritorio")),l.onclick=(e=this,function(){P?e.notifyOrderPause():e.notifyOrderPlay()}),u.onclick=(a=this,function(e){var t;1==T&&(T=!1,!getDevice().mobile)||(T=!1,t=e.offsetX?e.offsetX/u.offsetWidth:e.layerX/u.offsetWidth,a.notifyOrderSeekByProp(t))}),!(null!=psd.framework.ua.msie&&psd.framework.ua.msie&&parseInt(psd.framework.ua.version)<9)){var i=function(){m.style.left=parseInt(c.offsetWidth)+"px",T=!0,m.style.position="absolute !important"},s=function(){c.style.width=parseInt(m.style.left)+"px",m.style.position="absolute";var e=parseInt(m.offsetLeft)/parseInt(u.offsetWidth),t=Math.min(A,Math.max(A*e,0));return d.innerHTML=h.secondsAsTimeCode(t,"hh:mm:ss"),u.offsetWidth},o=(t=this,function(){m.style.position="absolute";var e=parseInt(m.offsetLeft)/parseInt(u.offsetWidth);t.notifyOrderSeekByProp(e)});getDevice().mobile?new emic.top.ui.DragContainer(u,m,i,s,o,0,u.offsetWidth).registrarDrag():new emic.top.ui.Drag(m,u,i,s,o).registrarDragFromParent()}w.apply(this),h.calculateClassSize()},w=function(){p&&(p.innerHTML=this.secondsAsTimeCode(Math.ceil(o.mediaData.duration/1e3),"hh:mm:ss")),f.innerHTML=o.mediaData.title};this.init=function(e){o=e,a=document.getElementById(o.internalData.skinContainer),function(){var e=new psd.framework.Parser,t=new psd.framework.Mediator,a=o.genericData.urlBase?o.genericData.urlBase+_+g:_+g;t.addEventListener(psd.framework.MediatorEvent.MEDIATE_COMPLETE,s,this),t.addEventListener(psd.framework.MediatorEvent.MEDIATE_ERROR,i,this),t.mediate(a,e,psd.framework.Mediator.RESPONSE_TEXT)}.apply(this),function(){var e=document.createElement("link"),t=o.genericData.urlBase?o.genericData.urlBase+y+S:y+S;e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t),void 0!==e&&document.getElementsByTagName("head")[0].appendChild(e)}.apply(this)},this.reset_skin=function(){},this.reset=function(){P=!1,l.className=l.className.replace(/mm_boton_pausa/g,"mm_boton_play"),d.innerHTML="0:00:00",c.style.width=0,m.style.left=0},this.secondsAsTimeCode=function(e,t){var a=Math.floor(e/3600),i=Math.floor((e-3600*a)/60),s=Math.floor(e-3600*a-60*i);return i<10&&(i="0"+i),s<10&&(s="0"+s),null==t?a+":"+i+":"+s:t.replace("hh",a).replace("mm",i).replace("ss",s)},this.resize=function(e,t){},this.onProgress=function(e){var t=100*e.currentTime/e.totalTime;A=e.totalTime,T||(c.style.width=t+"%",m.style.left=t+"%"),p.innerHTML=this.secondsAsTimeCode(e.totalTime,"hh:mm:ss"),d.innerHTML=this.secondsAsTimeCode(e.currentTime,"hh:mm:ss")},this.onVolumeChange=function(e){},this.onBufferEmpty=function(){t.apply(this,[!0])},this.onBufferFull=function(){t.apply(this,[!1])},this.showLoading=function(e){t.apply(this,[e])};var t=function(e){e?null!=psd.framework.ua.msie&&psd.framework.ua.msie&&parseInt(psd.framework.ua.version)<10||(r.className=r.className.replace("iniciar","cargando")):null!=psd.framework.ua.msie&&psd.framework.ua.msie&&parseInt(psd.framework.ua.version)<10||(r.className=r.className.replace("cargando","iniciar"))};this.externalOrder=function(e,t){"overrideTitle"==e&&(f.innerHTML=t)},this.onStatusChange=function(e){switch(e){case emic.top.MediaModule.STATUS_STOP:case emic.top.MediaModule.STATUS_PAUSE:case emic.top.AdModule.STATUS_PAUSE:P=!1,l.className=l.className.replace(/mm_boton_pausa/g,"mm_boton_play");break;case emic.top.MediaModule.STATUS_PLAY:r.className=r.className.replace(/mm_AudioPlayer_noiniciado/g,""),P=!0,l.className=l.className.replace(/mm_boton_play/g,"mm_boton_pausa");break;case emic.top.AdModule.STATUS_PLAY:case emic.top.event.MediaEvent.ON_MEDIA_END:break;case emic.top.AdModule.STATUS_STOP:case emic.top.AdModule.PUBLI_SKIPPED:}},this.onPositionChange=function(e){switch(e){case emic.top.TopPlayer.POSITION_PREVIEW:case emic.top.TopPlayer.POSITION_AD_PREROLL:case emic.top.TopPlayer.POSITION_AD_POSTROLL:}},this.onMetadata=function(e){},this.onCue=function(e){},this.onError=function(e,t){},this.onSwitchRequest=function(e){},this.onSwitchComplete=function(e){},this.requestFullScreen=function(){},this.cancelFullScreen=function(){},this.onSeekStart=function(e){},this.onSeekComplete=function(e){},this.calculateClassSize=function(){e=264<r.offsetWidth?r.offsetWidth<480?(r.className=r.className.replace(new RegExp(e,"g"),"mm_AudioPlayer_pequeno mm_AudioPlayer_titulo"),"mm_AudioPlayer_pequeno mm_AudioPlayer_titulo"):r.offsetWidth<640?(r.className=r.className.replace(new RegExp(e,"g"),"mm_AudioPlayer_mediano mm_AudioPlayer_titulo"),"mm_AudioPlayer_mediano mm_AudioPlayer_titulo"):(r.className=r.className.replace(new RegExp(e,"g"),"mm_AudioPlayer_grande mm_AudioPlayer_titulo"),"mm_AudioPlayer_grande mm_AudioPlayer_titulo"):(r.className=r.className.replace(new RegExp(e,"g"),"mm_AudioPlayer_pequeno"),"mm_AudioPlayer_pequeno")};var M=window.onresize;window.onresize="function"==typeof M?function(){M(),h.calculateClassSize()}:function(){h.calculateClassSize()}}t.prototype=new emic.top.ui.UISkinBase,e.TopSkin_EPAudioPortada=t}(emic.top.ui);